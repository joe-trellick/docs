<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<title data-react-helmet="true">2 - Configure Ditto | Ditto</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.ditto.live/tutorials/tasks/swiftui/configure-ditto"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="2 - Configure Ditto | Ditto"><meta data-react-helmet="true" name="description" content="2-1 Add Permissions to the Info.plist"><meta data-react-helmet="true" property="og:description" content="2-1 Add Permissions to the Info.plist"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.ditto.live/tutorials/tasks/swiftui/configure-ditto"><link data-react-helmet="true" rel="alternate" href="https://docs.ditto.live/tutorials/tasks/swiftui/configure-ditto" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.ditto.live/tutorials/tasks/swiftui/configure-ditto" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.2a640510.css">
<link rel="preload" href="/assets/js/runtime~main.8d5201d7.js" as="script">
<link rel="preload" href="/assets/js/main.f179f7c0.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.png" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Ditto</b></a><a href="https://www.ditto.live" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Home<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/getditto/samples" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Samples Apps<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a class="navbar__item navbar__link" href="/changelog">Changelog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/getditto/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/">Introduction</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Installation</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Concepts</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Tutorials</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Tasks App</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/tasks/index">Intro - Tasks App Tutorial</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">SwiftUI</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/tasks/swiftui/setup">1 - Setup</a></li><li class="menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/tutorials/tasks/swiftui/configure-ditto">2 - Configure Ditto</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/tasks/swiftui/tasks-list-screen">3 - Showing the List of Tasks</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/tasks/swiftui/edit-screen">4 - Editing Tasks</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Jetpack Compose</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">UIKit</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Android Kotlin</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">C# Console App</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Security</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Advanced</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Reference</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1>2 - Configure Ditto</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="2-1-add-permissions-to-the-infoplist"></a>2-1 Add Permissions to the <code>Info.plist</code><a class="hash-link" href="#2-1-add-permissions-to-the-infoplist" title="Direct link to heading">#</a></h2><p>For Ditto to fully use all the network transports like Bluetooth Low Energy, Local Area Network, Apple Wireless Direct, the app will need to ask the user for permissions. These permission prompts need to be in the <strong>Info.plist</strong> file of your project.</p><ol><li>Locate the <strong>Info.plist</strong> file</li><li>Right click and click <strong>Open As &gt; Source Code</strong></li></ol><p><img alt="Xcode open Info.plist as Source" src="/assets/images/xcode-open-plist-657f8a0b239971e4120c6dc2655458bd.png"></p><ol start="3"><li>Add the following XML lines at the bottom before the last <code>&lt;/dict&gt;</code></li></ol><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">Info.plist</div><div class="codeBlockContent_hGly xml"><pre tabindex="0" class="prism-code language-xml codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">key</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">NSBluetoothAlwaysUsageDescription</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">key</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">string</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Uses Bluetooth to connect and sync with nearby devices</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">string</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">key</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">NSBluetoothPeripheralUsageDescription</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">key</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">string</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Uses Bluetooth to connect and sync with nearby devices</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">string</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">key</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">NSLocalNetworkUsageDescription</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">key</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">string</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Uses WiFi to connect and sync with nearby devices</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">string</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">key</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">NSBonjourServices</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">key</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">array</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">string</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">_http-alt._tcp.</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">string</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">array</span><span class="token tag punctuation" style="color:#393A34">&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>For more information on these permissions <a href="/advanced/platform-permissions/ios-platform-permissions">click here</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="2-2-add-ditto-to-tasksappswift"></a>2-2 Add <code>ditto</code> to <code>TasksApp.swift</code><a class="hash-link" href="#2-2-add-ditto-to-tasksappswift" title="Direct link to heading">#</a></h2><p>When Xcode generated your project, there should be a file called <strong>TasksApp.swift</strong>. We will need an instance of Ditto throughout this tutorial and the app&#x27;s lifecycle.</p><ol><li>First import Ditto with <code>import DittoSwift</code></li><li>Construct an instance of Ditto with a development identity with an app name <code>&quot;live.ditto.tasks&quot;</code>. This value is important if you are interested in sync with another device with the TasksApp. We are using a <code>.development</code> setup, which should suffice for this tutorial. However, you should never deploy this to a production environment like the Apple App Store.</li><li>We will call <code>tryStartSync</code> as soon as the app&#x27;s <code>ContentView</code> appears. This method can throw an error in the event that the license token is invalid or expired. Add two <code>@State</code> variables to capture if <code>ditto.tryStartSync</code> throws an error. One variable will be <code>@State var isPresentingAlert = false</code> and the other is a <code>@State var errorMessage = &quot;&quot;</code>.</li><li>Add an <code>.onAppear</code> function and give it a license token. Look for <code>&quot;&lt;REPLACE_ME&gt;&quot;</code> and insert your valid license token. You can get a license token from our <a href="https://portal.ditto.live" target="_blank" rel="noopener noreferrer">cloud portal</a>. If the <code>tryStartSync()</code> fails, we will set <code>isPresentingAlert = true</code> and set the <code>errorMessage</code> to the error&#x27;s <code>.localizedDescription</code>.</li><li>We will then present a <code>.alert</code> if <code>isPresentingAlert</code> is true. Notice that we will pass a <code>@State</code> variable as a binding type, which is why we denoted <code>$isPresentingAlert</code> prefixed with a <code>$</code>. To learn more about SwiftUI&#x27;s <code>Binding</code> types like <code>@State</code> <a href="https://developer.apple.com/documentation/swiftui/state-and-data-flow" target="_blank" rel="noopener noreferrer">click here.</a></li></ol><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">TasksApp.swift</div><div class="codeBlockContent_hGly swift"><pre tabindex="0" class="prism-code language-swift codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">import SwiftUI</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// 1.</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">import DittoSwift</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@main</span></span><span class="token-line" style="color:#393A34"><span class="token plain">struct TasksApp: App {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 2.</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">    var ditto = Ditto(identity: .development(appName: &quot;live.ditto.tasks&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 3.</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">    @State var isPresentingAlert = false</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">    @State var errorMessage = &quot;&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    var body: some Scene {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        WindowGroup {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            ContentView()</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                // 4</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">                .onAppear(perform: {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">                    do {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">                        try ditto.setLicenseToken(&quot;&lt;REPLACE_ME&gt;&quot;)</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">                        try ditto.tryStartSync()</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">                    } catch (let err){</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">                        isPresentingAlert = true</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">                        errorMessage = err.localizedDescription</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">                    }</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">                })</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                // 5.</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">                .alert(isPresented: $isPresentingAlert) {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">                    Alert(title: Text(&quot;Uh Oh&quot;), message: Text(&quot;There was an error trying to start the sync. Here&#x27;s the error \(errorMessage) Ditto will continue working as a local database.&quot;), dismissButton: .default(Text(&quot;Got it!&quot;)))</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">                }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="2-3-create-a-task-struct"></a>2-3 Create a <code>Task</code> struct<a class="hash-link" href="#2-3-create-a-task-struct" title="Direct link to heading">#</a></h2><p>Ditto is a document database, which represents all of its rows in the database a JSON-like structure. In this tutorial, we will define each task like so:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly jsonc"><pre tabindex="0" class="prism-code language-jsonc codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;_id&quot;: &quot;123abc&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;body&quot;: &quot;Get Milk&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;isCompleted&quot;: true</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>These Task documents will all be in the &quot;tasks&quot; collection. We will be referencing this collection throughout this tutorial with:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly swift"><pre tabindex="0" class="prism-code language-swift codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">let tasksCollection = ditto.store[&quot;tasks&quot;]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Ditto documents have a flexible structure. Oftentimes, in strongly-typed languages like Swift, we will create a data structure give more definition to the app.</p><p>Create a new Swift file called <strong>Task.swift</strong> in your project.</p><ol><li>Add <code>import DittoSwift</code> to the top of the file.</li><li>Add the matching variables <code>let _id: String</code>, <code>let body: String</code>, and <code>let isCompleted: Bool</code> to the struct. We will use this to match the document values to to the struct.</li><li>Add an <code>init</code> constructor to <code>Task</code> that takes in a <code>DittoDocument</code></li><li>In the <code>init</code> constructor, parse out the document&#x27;s keys with Ditto&#x27;s type safe value accessors. This will safely map all the document&#x27;s values to the struct&#x27;s variables that we created in step 2.</li><li>Add an <code>extension Task: Identifiable</code> right below the <code>Task</code> struct definition and implement <code>var id: String</code> to return the <code>_id</code> key. We add the <code>Identifiable</code> protocol to assist SwiftUI&#x27;s <code>List</code> view and <code>ForEach</code> component in later sections. Collection views in SwiftUI require knowing if a view is unique to prevent wasteful redraws. While it may seem confusing, we are only allowing the protocol to read the <code>_id</code> that we added in step 2.</li></ol><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">Task.swift</div><div class="codeBlockContent_hGly swift"><pre tabindex="0" class="prism-code language-swift codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// 1.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import DittoSwift</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">struct Task {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 2.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    let _id: String</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    let body: String</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    let isCompleted: Bool</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 3.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    init(document: DittoDocument) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 4.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _id = document[&quot;_id&quot;].stringValue</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        body = document[&quot;body&quot;].stringValue</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        isCompleted = document[&quot;isCompleted&quot;].boolValue</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// 5.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">extension Task: Identifiable {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    var id: String {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return _id</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This data class takes a <code>DittoDocument</code> and safely parses out the values into native Kotlin types. We also added constructor that allows us to preview data without requiring Ditto.</p><p>So now in our application if we want an array of <code>Tasks</code>, <code>[Task]</code>, we can write the following code:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly swift"><pre tabindex="0" class="prism-code language-swift codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">let tasks: [Task] = ditto.store[&quot;tasks&quot;].findAll().exec().map({ Task(document: $0) })</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Once we set up our user interface, you&#x27;ll notice that reading these values becomes a bit easier with this added structure.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="2-4-create-a-taskslistscreen-view"></a>2-4 Create a <code>TasksListScreen</code> view<a class="hash-link" href="#2-4-create-a-taskslistscreen-view" title="Direct link to heading">#</a></h2><p>When we generated the project, Xcode created a default <code>ContentView</code>, which need to swap out for a better starter view. Let&#x27;s create a view called <code>TasksListScreen</code> which will show the list of the views.</p><ol><li>Create a new <strong>SwiftUI View</strong> View by clicking <strong>File &gt; New &gt; SwiftUI View</strong></li></ol><p><img alt="Xcode File New SwiftUI view" src="/assets/images/xcode-new-swiftui-view-5c5bd524ecc6bf16786a4645664a7002.png"></p><ol start="2"><li><p>Name it <strong>&quot;TasksListScreen&quot;</strong></p></li><li><p>At the top of the new <strong>TasksListScreen.</strong>Add Ditto with <code>import DittoSwift</code> at the top of the file</p></li><li><p>Create a constructor and a variable to pass <code>var ditto: Ditto</code></p></li><li><p>Replace the the <code>body</code> with <code>NavigationView</code> with a single <code>List</code> child. We will fill out the contents of the <code>List</code> in the next section. We&#x27;ve also added a couple of decorative navigation elements which we will hook up later. This includes a navigation title, <code>.navigationTitle</code> which shows the name of the app, a navigation plus button in <code>.navigationBarItems</code> and a <code>.sheet</code> that we will use navigate to an <code>EditScreen</code>. We will create the <code>EditScreen</code> later.</p></li></ol><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">TasksListScreen.swift</div><div class="codeBlockContent_hGly swift"><pre tabindex="0" class="prism-code language-swift codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">import SwiftUI</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// 3.</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">import DittoSwift</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">struct TasksListScreen: View {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 4.</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">    let ditto: Ditto</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">    init(ditto: Ditto) {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">        self.ditto = ditto</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    var body: some View {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 5.</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">        NavigationView {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">            List {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">            .navigationTitle(&quot;Tasks - SwiftUI&quot;)</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">            .navigationBarItems(trailing: Button(action: {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">            }, label: {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">                Image(systemName: &quot;plus&quot;)</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">            }))</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">            .sheet(isPresented: .constant(false), content: {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">            })</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><footer class="docusaurus-mt-lg"><div class="row"><div class="col"><a href="https://github.com/getditto/docs/edit/master/docs/tutorials/tasks/swiftui/2-configure-ditto.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/tutorials/tasks/swiftui/setup"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« 1 - Setup</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/tutorials/tasks/swiftui/tasks-list-screen"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">3 - Showing the List of Tasks Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#2-1-add-permissions-to-the-infoplist" class="table-of-contents__link">2-1 Add Permissions to the <code>Info.plist</code></a></li><li><a href="#2-2-add-ditto-to-tasksappswift" class="table-of-contents__link">2-2 Add <code>ditto</code> to <code>TasksApp.swift</code></a></li><li><a href="#2-3-create-a-task-struct" class="table-of-contents__link">2-3 Create a <code>Task</code> struct</a></li><li><a href="#2-4-create-a-taskslistscreen-view" class="table-of-contents__link">2-4 Create a <code>TasksListScreen</code> view</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/">Quick Start</a></li><li class="footer__item"><a href="https://www.ditto.live/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Main Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/getditto/samples" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Samples Apps<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a class="footer__link-item" href="/changelog">Changelog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/getditto/docs/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/getditto/docs/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub Issues<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/ditto" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/dittolive" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 DittoLive, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.8d5201d7.js"></script>
<script src="/assets/js/main.f179f7c0.js"></script>
</body>
</html>